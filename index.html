<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roulette - Tirage au sort</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
            color: #333;
        }
        .update-notice {
            background-color: #fff3cd;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
            display: none;
            border: 1px solid #ffeeba;
        }
        .update-notice.show {
            display: block;
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .panel {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            flex: 1;
            min-width: 300px;
        }
        h1, h2 {
            color: #2c3e50;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px 0;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2980b9;
        }
        button.delete {
            background-color: #e74c3c;
        }
        button.delete:hover {
            background-color: #c0392b;
        }
        button.edit {
            background-color: #f39c12;
        }
        button.edit:hover {
            background-color: #d35400;
        }
        button.reset {
            background-color: #95a5a6;
        }
        button.reset:hover {
            background-color: #7f8c8d;
        }
        #result {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background-color: #f0f8ff;
            border-radius: 4px;
            min-height: 60px;
        }
        #options-list {
            list-style-type: none;
            padding: 0;
            margin: 20px 0;
        }
        #options-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        #options-list li:last-child {
            border-bottom: none;
        }
        .option-buttons {
            display: flex;
            gap: 5px;
        }
        #new-option {
            width: 70%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-right: 5px;
        }
        .input-group {
            display: flex;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <h1>Roulette - Tirage au sort</h1>

    <div id="update-notice" class="update-notice">
        üîÑ Une nouvelle version est disponible !
        <button id="refresh-btn">Rafra√Æchir maintenant</button>
    </div>

    <div class="container">
        <div class="panel">
            <h2>Tirage au sort</h2>
            <button id="draw-btn">Tirer au sort</button>
            <div id="result">Cliquez sur "Tirer au sort" pour commencer</div>
        </div>

        <div class="panel">
            <h2>Gestion des options</h2>
            <div class="input-group">
                <input type="text" id="new-option" placeholder="Ajouter une nouvelle option">
                <button id="add-btn">Ajouter</button>
            </div>
            <ul id="options-list"></ul>
            <button id="reset-btn" class="reset">R√©initialiser les options</button>
        </div>
    </div>

    <script>
        // Version actuelle du site (√† incr√©menter √† chaque mise √† jour)
        const CURRENT_VERSION = "1.2";

        // Options par d√©faut
        const DEFAULT_OPTIONS = [
            "Edging 30 min",
            "+3 jours",
            "-2 jours",
            "Edging 1h",
            "Plug anal",
            "Baise le God",
            "+ 5 jours",
            "- 5 jours",
        ];

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            // V√©rification de la version
            const savedVersion = localStorage.getItem('rouletteVersion');
            if (savedVersion !== CURRENT_VERSION) {
                document.getElementById('update-notice').classList.add('show');
                localStorage.setItem('rouletteVersion', CURRENT_VERSION);
            }

            // Chargement des options
            let options = JSON.parse(localStorage.getItem('rouletteOptions')) || [...DEFAULT_OPTIONS];

            // Bouton de rafra√Æchissement
            document.getElementById('refresh-btn').addEventListener('click', function() {
                window.location.reload(true);
            });

            // Fonction pour sauvegarder les options
            function saveOptions() {
                localStorage.setItem('rouletteOptions', JSON.stringify(options));
            }

            // Fonction pour afficher les options
            function renderOptions() {
                const optionsList = document.getElementById('options-list');
                optionsList.innerHTML = '';

                options.forEach((option, index) => {
                    const li = document.createElement('li');
                    li.innerHTML = `
                        <span>${option}</span>
                        <div class="option-buttons">
                            <button class="edit" data-index="${index}">√âditer</button>
                            <button class="delete" data-index="${index}">Supprimer</button>
                        </div>
                    `;
                    optionsList.appendChild(li);
                });

                // Ajout des √©v√©nements
                document.querySelectorAll('.delete').forEach(button => {
                    button.addEventListener('click', function() {
                        const index = parseInt(this.dataset.index);
                        options.splice(index, 1);
                        saveOptions();
                        renderOptions();
                    });
                });

                document.querySelectorAll('.edit').forEach(button => {
                    button.addEventListener('click', function() {
                        const index = parseInt(this.dataset.index);
                        const newValue = prompt("Modifier l'option :", options[index]);
                        if (newValue && newValue.trim() !== "") {
                            options[index] = newValue.trim();
                            saveOptions();
                            renderOptions();
                        }
                    });
                });
            }

            // Bouton "Ajouter"
            document.getElementById('add-btn').addEventListener('click', function() {
                const newOption = document.getElementById('new-option').value.trim();
                if (newOption === "") {
                    alert("Veuillez entrer une option valide");
                    return;
                }

                if (options.includes(newOption)) {
                    alert("Cette option existe d√©j√† !");
                    return;
                }

                options.push(newOption);
                saveOptions();
                renderOptions();
                document.getElementById('new-option').value = "";
            });

            // Bouton "Tirer au sort"
            document.getElementById('draw-btn').addEventListener('click', function() {
                if (options.length === 0) {
                    document.getElementById('result').textContent = "Aucune option disponible";
                    return;
                }

                const randomIndex = Math.floor(Math.random() * options.length);
                document.getElementById('result').textContent = options[randomIndex];
            });

            // Bouton "R√©initialiser"
            document.getElementById('reset-btn').addEventListener('click', function() {
                if (confirm("Voulez-vous vraiment r√©initialiser les options ?")) {
                    options = [...DEFAULT_OPTIONS];
                    saveOptions();
                    renderOptions();
                    document.getElementById('result').textContent = "Options r√©initialis√©es";
                }
            });

            // Initialisation
            renderOptions();
        });
    </script>
</body>
</html>
